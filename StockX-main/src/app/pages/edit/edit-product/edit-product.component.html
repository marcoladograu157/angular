<body>
  <div class="container-form">
    <h2 class="form-title">Editar Produto</h2>

    <form (ngSubmit)="atualizarProduto()" #produtoForm="ngForm" novalidate>
      <div class="form-box">
        <div class="form-group">
          <label for="name">Nome do Produto</label>
          <input
            type="text"
            id="name"
            name="name"
            [(ngModel)]="produto.name"
            required
            minlength="3"
            placeholder="Digite o nome do produto"
          />
          <div
            class="error"
            *ngIf="produtoForm.submitted && produto.name && produto.name.length < 3"
          >
            O nome deve ter pelo menos 3 caracteres.
          </div>
        </div>

        <div *ngIf="mostrarMensagem" class="mensagem-flutuante">
          {{ mensagemFlutuante }}
        </div>

        <div class="form-group">
          <label for="quantity">Quantidade</label>
          <input
            type="number"
            id="quantity"
            name="quantity"
            [(ngModel)]="produto.quantity"
            required
            min="0"
            placeholder="Quantidade disponível"
          />
          <div
            class="error"
            *ngIf="produtoForm.submitted && produto.quantity < 0"
          >
            A quantidade não pode ser negativa.
          </div>
        </div>

        <div class="form-group">
          <label for="price">Preço (R$)</label>
          <input
            type="number"
            id="price"
            name="price"
            [(ngModel)]="produto.price"
            required
            min="0"
            step="0.01"
            placeholder="Preço do produto"
          />
          <div
            class="error"
            *ngIf="produtoForm.submitted && produto.price < 0"
          >
            O preço não pode ser negativo.
          </div>
        </div>

        <!-- Campo: Custo -->
        <div class="form-group">
          <label for="cost">Custo (R$)</label>
          <input
            type="number"
            id="cost"
            name="cost"
            [(ngModel)]="produto.cost"
            required
            min="0"
            step="0.01"
            placeholder="Custo do produto"
          />
          <div
            class="error"
            *ngIf="produtoForm.submitted && produto.cost < 0"
          >
            O custo não pode ser negativo.
          </div>
        </div>

        <!-- Campo: Categoria (Select) -->
        <div class="form-group">
          <label for="category">Categoria</label>
          <select
            id="category"
            name="category"
            [(ngModel)]="produto.category"
            required
          >
            <option value="" disabled [selected]="!produto.category">Selecione uma categoria</option>
            <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
          </select>
          <div
            class="error"
            *ngIf="produtoForm.submitted && !produto.category"
          >
            A categoria é obrigatória.
          </div>
        </div>

        <div class="form-actions">
          <button
            type="submit"
            [disabled]="produtoForm.invalid"
            class="btn btn-primary"
          >
            Salvar
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="cancelar()"
          >
            Cancelar
          </button>
        </div>
      </div>
    </form>
  </div>
</body>
